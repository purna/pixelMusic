<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Music Grid</title>
    <!-- Fonts & Icons -->
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
    <!-- Google Fonts - Press Start 2P -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <!-- Custom Font -->
    <style>
        @font-face {
            font-family: 'Inter';
            src: url('fonts/inter-normal.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Inter';
            src: url('fonts/inter-bold.woff2') format('woff2');
            font-weight: bold;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Press Start 2P';
            src: url('fonts/press-start-2p-regular.woff2') format('woff2');
            font-weight: normal;
            font-style: normal;
            font-display: swap;
        }
    </style>
    <!-- Local Font Awesome Implementation -->
    <link rel="stylesheet" href="fonts/fontawesome-free-6.5.0/css/all.min.css">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/settings.css">
    <link rel="stylesheet" href="css/modal.css">
    <link rel="stylesheet" href="css/tutorials.css">
    <link rel="stylesheet" href="css/node.css">
    <link rel="stylesheet" href="css/node-properties.css">
</head>

<body>
    <header>
        <div class="logo-area">
            <h1>Pixel Music</h1>
            <span class="badge">Strudel V1.0</span>
        </div>
        <div class="header-controls">
            <button id="initAudioBtn" class="header-btn action"><i class="fas fa-volume-up"></i> Enable Audio</button>
            <button id="loadProject" class="header-btn action"><i class="fas fa-folder-open"></i> Load</button>
            <button id="saveProject" class="header-btn primary"><i class="fas fa-save"></i> Save</button>
            <button id="exportMixBtn" class="header-btn action"><i class="fas fa-file-export"></i> Export</button>
            <button id="settingsBtn" class="header-btn"><i class="fas fa-cog"></i> Settings</button>
        </div>
    </header>

    <main>
        <div id="icon-sidebar">
            <button class="icon-tab-btn category-sidebar-tab active" data-category="instruments" data-tooltip-right="Instruments">
                <i class="fas fa-music"></i>
            </button>
            <button class="icon-tab-btn category-sidebar-tab" data-category="pattern" data-tooltip-right="Pattern">
                <i class="fas fa-repeat"></i>
            </button>
            <button class="icon-tab-btn category-sidebar-tab" data-category="effects" data-tooltip-right="Effects">
                <i class="fas fa-sliders-h"></i>
            </button>
            <button class="icon-tab-btn category-sidebar-tab" data-category="utility" data-tooltip-right="Utility">
                <i class="fas fa-cog"></i>
            </button>
            <button class="icon-tab-btn category-sidebar-tab" data-category="patternFunctions" data-tooltip-right="Pattern Functions">
                <i class="fas fa-code"></i>
            </button>
            <button class="icon-tab-btn category-sidebar-tab" data-category="combinators" data-tooltip-right="Combinators">
                <i class="fas fa-layer-group"></i>
            </button>
        </div>

        <div id="workspace-area">
            <div id="fixed-tools-panel">
                <div class="tools-header">Instruments</div>
                <div id="instrument-panel">
                    <div class="instrument-categories">
                        <!-- Category content is now controlled by sidebar tabs -->
                        <div id="instrument-content">
                            <!-- Dynamically loaded from strudel-node-instruments.json -->
                        </div>
                    </div>
                </div>

                <!-- Node Type Legend -->
                <div class="info-panel">
                    <h3>Node Type Legend</h3>
                    <div class="node-legend">
                        <div class="legend-item">
                            <div class="legend-color legend-instrument"></div>
                            <span>Instruments</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-note"></div>
                            <span>Musical Notes</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-rest"></div>
                            <span>Rests</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-multiplier"></div>
                            <span>Multipliers</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-stack"></div>
                            <span>Stack Operations</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-parallel"></div>
                            <span>Parallel Execution</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color legend-group"></div>
                            <span>Groups</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="center-stack">
            <div id="music-grid-container">
                <div class="grid-header">Node-Based Music Editor</div>
                <div id="node-canvas">
                    <div class="canvas-content" id="canvas-content">
                        <!-- Nodes and connections will be rendered here -->
                    </div>

                    <!-- Canvas Controls -->
                    <div class="canvas-controls">
                        <div class="control-group">
                            <button id="pan-tool" class="control-btn pan-btn"
                                title="Pan Tool (Drag to move canvas)">
                                <i class="fas fa-hand-paper"></i>
                            </button>
                            <button id="back-to-parent" class="control-btn back-btn" title="Back to Parent Level (ESC)">
                                <i class="fas fa-arrow-up"></i>
                            </button>
                            <button id="zoom-in" class="control-btn" title="Zoom In">
                                <i class="fas fa-search-plus"></i>
                            </button>
                            <button id="zoom-out" class="control-btn" title="Zoom Out">
                                <i class="fas fa-search-minus"></i>
                            </button>
                            <span id="zoom-level" class="zoom-level">100%</span>
                        </div>
                    </div>
                </div>
                <div class="play-controls">
                    <button id="play-all-nodes" class="btn btn-play-all"><i class="fas fa-play"></i> Play All
                        Nodes</button>
                    <button id="stop-all-nodes" class="btn btn-secondary"><i class="fas fa-stop"></i> Stop All</button>
                    <button id="delete-selected-node" class="btn btn-secondary"><i class="fas fa-trash-alt"></i> Delete
                        Selected</button>
                    <button id="clear-nodes" class="btn btn-secondary"><i class="fas fa-trash"></i> Clear Nodes</button>
                </div>

                <!-- Status Message -->
                <div class="status-message" id="status-message">
                    Node Editor Ready - Click play buttons on nodes to test sounds
                </div>
            </div>
        </div>

        <!-- Dynamic Side Panel for Node Properties -->
        <div id="side-panel">
            <div class="side-panel-header">
                <h3 id="side-panel-title">Node Properties</h3>
                <button class="side-panel-close" id="side-panel-close">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="node-properties">
                <div class="property-group">
                    <label for="node-instrument">Node Type</label>
                    <select id="node-instrument">
                        <!-- Options will be populated dynamically based on node category -->
                    </select>
                </div>

                <div class="property-group">
                    <label for="node-note">Note (if applicable)</label>
                    <input type="text" id="node-note" placeholder="e.g., c4, f#3">
                </div>

                <!-- Schema-based properties will be injected here -->
                <div id="schema-properties-container">
                    <!-- Dynamic properties from schema -->
                </div>
            </div>
        </div>
        </div>
    </main>

    <!-- Panel Toggle Button -->
    <button id="panel-toggle">
        <i class="fas fa-cog"></i>
    </button>

    <!-- Settings Modal -->
    <div class="modal-overlay" id="settings-modal">
        <div class="modal">
            <div class="modal-header">
                <h2><i class="fas fa-cog"></i> Settings</h2>
                <button class="modal-close" id="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-content">
                <!-- Settings Tabs -->
                <div class="settings-tabs">
                    <button class="settings-tab active" data-tab="general">
                        <i class="fas fa-cog"></i> General
                    </button>
                    <button class="settings-tab" data-tab="audio-effects">
                        <i class="fas fa-sliders-h"></i> Audio Effects
                    </button>
                </div>

                <!-- General Settings Tab -->
                <div class="settings-tab-content active" data-tab-content="general">
                    <div class="property-group">
                        <label for="gridSize">Grid Size</label>
                        <select id="gridSize">
                            <option value="2x2">2x2</option>
                            <option value="4x4">4x4</option>
                            <option value="8x8">8x8</option>
                        </select>
                    </div>
                    <div class="property-group">
                        <label for="bpm">BPM</label>
                        <input type="range" id="bpm" min="60" max="200" value="120">
                    </div>
                </div>

                <!-- Audio Effects Tab -->
                <div class="settings-tab-content" data-tab-content="audio-effects">
                    <div class="settings-content">
                        <!-- Core Amplitude & Envelope -->
                        <div class="settings-section">
                            <div class="section-heading">Core Amplitude & Envelope</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-volume-up"></i>
                                        <span>Gain (Volume)</span>
                                    </label>
                                    <input type="range" id="settings-gain" class="settings-range" min="0" max="2"
                                        step="0.01" value="1">
                                    <div class="range-value" id="gain-value">1.0</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrow-down"></i>
                                        <span>Decay</span>
                                    </label>
                                    <input type="range" id="settings-decay" class="settings-range" min="0" max="2"
                                        step="0.01" value="0.4">
                                    <div class="range-value" id="decay-value">0.4</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-wave-square"></i>
                                        <span>Sustain</span>
                                    </label>
                                    <input type="range" id="settings-sustain" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.2">
                                    <div class="range-value" id="sustain-value">0.2</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrow-up"></i>
                                        <span>Attack</span>
                                    </label>
                                    <input type="range" id="settings-attack" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.01">
                                    <div class="range-value" id="attack-value">0.01</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrow-down"></i>
                                        <span>Release</span>
                                    </label>
                                    <input type="range" id="settings-release" class="settings-range" min="0" max="2"
                                        step="0.01" value="0.2">
                                    <div class="range-value" id="release-value">0.2</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrows-alt-h"></i>
                                        <span>Pan (Stereo)</span>
                                    </label>
                                    <input type="range" id="settings-pan" class="settings-range" min="-1" max="1"
                                        step="0.01" value="0">
                                    <div class="range-value" id="pan-value">0</div>
                                </div>
                            </div>
                        </div>

                        <!-- Filters -->
                        <div class="settings-section">
                            <div class="section-heading">Filters</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-filter"></i>
                                        <span>Low-Pass Filter (Hz)</span>
                                    </label>
                                    <input type="range" id="settings-lpf" class="settings-range" min="20" max="20000"
                                        step="10" value="800">
                                    <div class="range-value" id="lpf-value">800</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-filter"></i>
                                        <span>High-Pass Filter (Hz)</span>
                                    </label>
                                    <input type="range" id="settings-hpf" class="settings-range" min="20" max="20000"
                                        step="10" value="200">
                                    <div class="range-value" id="hpf-value">200</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-filter"></i>
                                        <span>Band-Pass Filter (Hz)</span>
                                    </label>
                                    <input type="range" id="settings-bpf" class="settings-range" min="20" max="20000"
                                        step="10" value="1200">
                                    <div class="range-value" id="bpf-value">1200</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-filter"></i>
                                        <span>Filter Resonance (Q)</span>
                                    </label>
                                    <input type="range" id="settings-lpq" class="settings-range" min="0" max="10"
                                        step="0.1" value="0.7">
                                    <div class="range-value" id="lpq-value">0.7</div>
                                </div>
                            </div>
                        </div>

                        <!-- Time & Space Effects -->
                        <div class="settings-section">
                            <div class="section-heading">Time & Space Effects</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-clock"></i>
                                        <span>Delay Time (cycles)</span>
                                    </label>
                                    <input type="range" id="settings-delay" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.25">
                                    <div class="range-value" id="delay-value">0.25</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-redo"></i>
                                        <span>Delay Feedback</span>
                                    </label>
                                    <input type="range" id="settings-delayfb" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.4">
                                    <div class="range-value" id="delayfb-value">0.4</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-music"></i>
                                        <span>Delay Triplet Feel</span>
                                    </label>
                                    <input type="range" id="settings-delayt" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.33">
                                    <div class="range-value" id="delayt-value">0.33</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-mountain"></i>
                                        <span>Reverb Amount</span>
                                    </label>
                                    <input type="range" id="settings-reverb" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.3">
                                    <div class="range-value" id="reverb-value">0.3</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-cube"></i>
                                        <span>Room Size</span>
                                    </label>
                                    <input type="range" id="settings-room" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.5">
                                    <div class="range-value" id="room-value">0.5</div>
                                </div>
                            </div>
                        </div>

                        <!-- Distortion & Saturation -->
                        <div class="settings-section">
                            <div class="section-heading">Distortion & Saturation</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-fire"></i>
                                        <span>Distortion</span>
                                    </label>
                                    <input type="range" id="settings-distort" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.3">
                                    <div class="range-value" id="distort-value">0.3</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-compress"></i>
                                        <span>Bitcrush</span>
                                    </label>
                                    <input type="range" id="settings-crush" class="settings-range" min="1" max="16"
                                        step="1" value="4">
                                    <div class="range-value" id="crush-value">4</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-wave-square"></i>
                                        <span>Waveshaper</span>
                                    </label>
                                    <input type="range" id="settings-shape" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.5">
                                    <div class="range-value" id="shape-value">0.5</div>
                                </div>
                            </div>
                        </div>

                        <!-- Pitch & Playback -->
                        <div class="settings-section">
                            <div class="section-heading">Pitch & Playback</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-tachometer-alt"></i>
                                        <span>Playback Speed</span>
                                    </label>
                                    <input type="range" id="settings-speed" class="settings-range" min="0.1" max="2"
                                        step="0.01" value="1">
                                    <div class="range-value" id="speed-value">1.0</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-music"></i>
                                        <span>Pitch (semitones)</span>
                                    </label>
                                    <input type="range" id="settings-note" class="settings-range" min="-24" max="24"
                                        step="1" value="0">
                                    <div class="range-value" id="note-value">0</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrows-alt-v"></i>
                                        <span>Octave Shift</span>
                                    </label>
                                    <input type="range" id="settings-coarse" class="settings-range" min="-2" max="2"
                                        step="1" value="0">
                                    <div class="range-value" id="coarse-value">0</div>
                                </div>
                            </div>
                        </div>

                        <!-- Rhythmic & Glitch -->
                        <div class="settings-section">
                            <div class="section-heading">Rhythmic & Glitch</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-cut"></i>
                                        <span>Chop (slices)</span>
                                    </label>
                                    <input type="range" id="settings-chop" class="settings-range" min="1" max="16"
                                        step="1" value="8">
                                    <div class="range-value" id="chop-value">8</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-redo"></i>
                                        <span>Stutter (repeats)</span>
                                    </label>
                                    <input type="range" id="settings-stutter" class="settings-range" min="1" max="8"
                                        step="1" value="2">
                                    <div class="range-value" id="stutter-value">2</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-scissors"></i>
                                        <span>Truncate (tail cut)</span>
                                    </label>
                                    <input type="range" id="settings-trunc" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.5">
                                    <div class="range-value" id="trunc-value">0.5</div>
                                </div>
                            </div>
                        </div>

                        <!-- Modulation -->
                        <div class="settings-section">
                            <div class="section-heading">Modulation & Movement</div>
                            <div class="settings-group">
                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-wave-sine"></i>
                                        <span>Vibrato (Hz)</span>
                                    </label>
                                    <input type="range" id="settings-vibrato" class="settings-range" min="1" max="20"
                                        step="1" value="4">
                                    <div class="range-value" id="vibrato-value">4</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrows-alt-v"></i>
                                        <span>Vibrato Depth</span>
                                    </label>
                                    <input type="range" id="settings-vibdepth" class="settings-range" min="0" max="0.1"
                                        step="0.001" value="0.02">
                                    <div class="range-value" id="vibdepth-value">0.02</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-wave-square"></i>
                                        <span>Tremolo (Hz)</span>
                                    </label>
                                    <input type="range" id="settings-tremolo" class="settings-range" min="1" max="20"
                                        step="1" value="8">
                                    <div class="range-value" id="tremolo-value">8</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-arrows-alt-v"></i>
                                        <span>Tremolo Depth</span>
                                    </label>
                                    <input type="range" id="settings-tremdepth" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.5">
                                    <div class="range-value" id="tremdepth-value">0.5</div>
                                </div>
                            </div>
                        </div>

                        <!-- Probability & Variation -->
                        <div class="settings-section">
                            <div class="section-heading">Probability & Variation</div>
                            <div class="settings-group">
                                <div class="property-group">
                                    <label class="property-label">
                                        <i class="fas fa-dice"></i>
                                        <span>Random Effects</span>
                                    </label>
                                    <div class="setting-description">
                                        These controls allow you to apply effects probabilistically to create variation
                                        in your sounds.
                                    </div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-percentage"></i>
                                        <span>Often Probability</span>
                                    </label>
                                    <input type="range" id="settings-often" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.75">
                                    <div class="range-value" id="often-value">75%</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-percentage"></i>
                                        <span>Sometimes Probability</span>
                                    </label>
                                    <input type="range" id="settings-sometimes" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.5">
                                    <div class="range-value" id="sometimes-value">50%</div>
                                </div>

                                <div class="property-group has-slider">
                                    <label class="property-label">
                                        <i class="fas fa-percentage"></i>
                                        <span>Rarely Probability</span>
                                    </label>
                                    <input type="range" id="settings-rarely" class="settings-range" min="0" max="1"
                                        step="0.01" value="0.25">
                                    <div class="range-value" id="rarely-value">25%</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-actions">
                    <button class="modal-close">Cancel</button>
                    <button class="primary" id="saveSettings">Save</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Tone.js Library - Using newer version that supports AudioWorkletNode -->
    <script src="https://cdn.jsdelivr.net/npm/tone@14.8.43/build/Tone.min.js"></script>
    <!-- Music Manager - Audio effects processing -->
    <script src="js/musicManager.js"></script>
    <!-- Strudel.cc Library - Load as regular script instead of module -->
    <script src="https://cdn.jsdelivr.net/npm/@strudel/webaudio@1.2.6/dist/strudel.min.js"
        onerror="this.onerror=null; this.src='js/strudel.esm.min.js'; console.log('Falling back to local Strudel file');"
        onload="console.log('Strudel CDN loaded successfully')">
        </script>

    <!-- Tooltip System -->
    <script src="js/tooltip.js"></script>
    <!-- Audio Effects Manager -->
    <script src="js/audioEffectsManager.js"></script>
    <!-- Dynamic Menu Loader -->
    <script src="js/menuLoader.js"></script>
    <!-- Strudel Pattern Generator - Load before NodeManager -->
    <script src="js/strudelPatternGenerator.js"></script>
    <!-- Node System Modules -->
    <script src="js/nodes/NodeCanvas.js"></script>
    <script src="js/nodes/ConnectionManager.js"></script>
    <script src="js/nodes/NodeFactory.js"></script>
    <script src="js/nodes/NodeAudio.js"></script>
    <script src="js/nodes/NodeManager.js"></script>
    <!-- Main Application Script -->
    <script src="js/app.js"></script>

    <!-- Footer with Strudel Example Input -->
    <footer class="strudel-footer">
        <div class="footer-content">
            <div class="strudel-input-section">
                <h3><i class="fas fa-code"></i> Strudel Pattern Generator</h3>
                <div class="input-group">
                    <input type="text" id="strudel-example-input"
                        placeholder="Enter Strudel pattern, e.g., s('[bd <hh oh>]*2').bank('tr909').dec(.4)" />
                </div>
                <div class="example-buttons">
                    <div class="example-btn" data-example="s('[bd <hh oh>]*2').bank('tr909').dec(.4)" data-tooltip="s('[bd &lt;hh oh&gt;]*2').bank('tr909').dec(.4)">
                        <span>Simple Beat</span>
                    </div>
                    <div class="example-btn" data-example="stack(s('bd'), s('sd'), s('hh')).bank('tr909')" data-tooltip="stack(s('bd'), s('sd'), s('hh')).bank('tr909')">
                        <span>Complex Pattern</span>
                    </div>
                    <div class="example-btn" data-example="s('bd*4 sd*4').bank('tr808')" data-tooltip="s('bd*4 sd*4').bank('tr808')">
                        <span>808 Style</span>
                    </div>
                    <div class="example-btn" data-example="note('c4 e4 g4 c5').s('piano')" data-tooltip="note('c4 e4 g4 c5').s('piano')">
                        <span>Piano Melody</span>
                    </div>
                </div>
            </div>
        </div>
    </footer>


    <!-- Initialize the Strudel Pattern Generator -->
    <script>
        // Handle example button clicks
        document.addEventListener('DOMContentLoaded', function() {
            // Example button click handlers
            document.querySelectorAll('.example-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const example = this.dataset.example;
                    const input = document.getElementById('strudel-example-input');
                    if (input && example) {
                        input.value = example;
                        // Trigger input event to notify any listeners
                        input.dispatchEvent(new Event('input', { bubbles: true }));
                        // Scroll to input
                        input.scrollIntoView({ behavior: 'smooth', block: 'center' });
                        input.focus();
                    }
                });
            });
        });
    </script>

</body>

</html>