<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pixel Music Grid</title>
    <!-- Fonts & Icons -->
    <link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
      <!-- Google Fonts - Press Start 2P -->
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
     <!-- Custom Font -->
     <style>
         @font-face {
             font-family: 'Inter';
             src: url('fonts/inter-normal.woff2') format('woff2');
             font-weight: normal;
             font-style: normal;
             font-display: swap;
         }
         @font-face {
             font-family: 'Inter';
             src: url('fonts/inter-bold.woff2') format('woff2');
             font-weight: bold;
             font-style: normal;
             font-display: swap;
         }
         @font-face {
             font-family: 'Press Start 2P';
             src: url('fonts/press-start-2p-regular.woff2') format('woff2');
             font-weight: normal;
             font-style: normal;
             font-display: swap;
         }
     </style>
     <!-- Local Font Awesome Implementation -->
     <link rel="stylesheet" href="fonts/fontawesome-free-6.5.0/css/all.min.css">
     <link rel="stylesheet" href="css/styles.css">
     <link rel="stylesheet" href="css/settings.css">
     <link rel="stylesheet" href="css/modal.css">
     <link rel="stylesheet" href="css/tutorials.css">
</head>

<body>
    <header>
        <div class="logo-area">
            <h1>Pixel Music</h1>
            <span class="badge">Grid V1.0</span>
        </div>
        <div class="header-controls">
            <button id="initAudioBtn" class="header-btn action"><i class="fas fa-volume-up"></i> Enable Audio</button>
            <button id="loadProject" class="header-btn action"><i class="fas fa-folder-open"></i> Load</button>
            <button id="saveProject" class="header-btn primary"><i class="fas fa-save"></i> Save</button>
            <button id="exportMixBtn" class="header-btn action"><i class="fas fa-file-export"></i> Export</button>
            <button id="settingsBtn" class="header-btn"><i class="fas fa-cog"></i> Settings</button>
        </div>
    </header>

    <main>
        <div id="icon-sidebar">
            <button class="icon-tab-btn" data-panel="instruments" data-tooltip-right="Instruments">
                <i class="fas fa-music"></i>
            </button>
            <!--
            <button class="icon-tab-btn" data-panel="settings" data-tooltip-right="Settings">
                <i class="fas fa-cog"></i>
            </button>
            -->
        </div>

        <div id="workspace-area">
            <div id="fixed-tools-panel">
                <div class="tools-header">Instruments</div>
                <div id="instrument-panel">
                    <div class="instrument-categories">
                        <!-- Category Tabs -->
                        <div class="category-tabs">
                            <button class="category-tab active" data-category="samples">Samples</button>
                            <button class="category-tab" data-category="drum-machines">Drum Machines</button>
                            <button class="category-tab" data-category="synths">Synths</button>
                            <button class="category-tab" data-category="tonejs">Tone.js</button>
                        </div>
                          
                        <!-- Samples Category -->
                        <div class="instrument-list category-content active" data-category="samples">
                            <!-- Percussion Subgroup -->
                            <div class="sample-subgroup" data-sample-group="percussion">
                                <div class="sample-group-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Percussion</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="sample-group-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="bongo" data-strudel="bongo(28)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Bongo</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="brakedrum" data-strudel="brakedrum(17)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Brake Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="cabasa" data-strudel="cabasa(6)">
                                        <i class="fas fa-shaker instrument-icon"></i>
                                        <span>Cabasa</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Metallic Subgroup -->
                            <div class="sample-subgroup" data-sample-group="metallic">
                                <div class="sample-group-header">
                                    <i class="fas fa-gong instrument-icon"></i>
                                    <span>Metallic</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="sample-group-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="agogo" data-strudel="agogo(5)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Agogo</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="anvil" data-strudel="anvil(9)">
                                        <i class="fas fa-hammer instrument-icon"></i>
                                        <span>Anvil</span>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Wooden Subgroup -->
                            <div class="sample-subgroup" data-sample-group="wooden">
                                <div class="sample-group-header">
                                    <i class="fas fa-xylophone instrument-icon"></i>
                                    <span>Wooden</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="sample-group-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="balafon" data-strudel="balafon(6)">
                                        <i class="fas fa-xylophone instrument-icon"></i>
                                        <span>Balafon</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                          
                        <!-- Drum Machines Category -->
                        <div class="instrument-list category-content" data-category="drum-machines">
                            <!-- Drum Machine Categories -->
                            <div class="drum-machine-category" data-drum-machine="9000">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>9000</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="9000_bd" data-strudel="9000_bd(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_sd" data-strudel="9000_sd(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_hh" data-strudel="9000_hh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_oh" data-strudel="9000_oh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_lt" data-strudel="9000_lt(2)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_mt" data-strudel="9000_mt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_ht" data-strudel="9000_ht(2)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_rd" data-strudel="9000_rd(2)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_cr" data-strudel="9000_cr(2)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="9000_rim" data-strudel="9000_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="drum-machine-category" data-drum-machine="AkaiLinn">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Akai Linn</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_bd" data-strudel="akailinn_bd(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_sd" data-strudel="akailinn_sd(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_hh" data-strudel="akailinn_hh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_oh" data-strudel="akailinn_oh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_lt" data-strudel="akailinn_lt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_mt" data-strudel="akailinn_mt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_ht" data-strudel="akailinn_ht(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_rd" data-strudel="akailinn_rd(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_cr" data-strudel="akailinn_cr(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="akailinn_rim" data-strudel="akailinn_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="drum-machine-category" data-drum-machine="RhythmAce">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Rhythm Ace</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_bd" data-strudel="rhythmace_bd(3)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_sd" data-strudel="rhythmace_sd(3)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_hh" data-strudel="rhythmace_hh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_oh" data-strudel="rhythmace_oh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_lt" data-strudel="rhythmace_lt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_mt" data-strudel="rhythmace_mt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_ht" data-strudel="rhythmace_ht(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_rd" data-strudel="rhythmace_rd(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_cr" data-strudel="rhythmace_cr(2)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="rhythmace_rim" data-strudel="rhythmace_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="drum-machine-category" data-drum-machine="RolandTR808">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Roland TR-808</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_bd" data-strudel="tr808_bd(25)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_sd" data-strudel="tr808_sd(25)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_hh" data-strudel="tr808_hh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_oh" data-strudel="tr808_oh(5)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_lt" data-strudel="tr808_lt(5)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_mt" data-strudel="tr808_mt(5)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_ht" data-strudel="tr808_ht(5)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_rd" data-strudel="tr808_rd(25)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_cr" data-strudel="tr808_cr(25)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr808_rim" data-strudel="tr808_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="drum-machine-category" data-drum-machine="RolandTR707">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Roland TR-707</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_bd" data-strudel="tr707_bd(2)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_sd" data-strudel="tr707_sd(2)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_hh" data-strudel="tr707_hh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_oh" data-strudel="tr707_oh(1)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_lt" data-strudel="tr707_lt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_mt" data-strudel="tr707_mt(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_ht" data-strudel="tr707_ht(1)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_rd" data-strudel="tr707_rd(2)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_cr" data-strudel="tr707_cr(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="tr707_rim" data-strudel="tr707_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                             
                            <div class="drum-machine-category" data-drum-machine="ViscoSpaceDrum">
                                <div class="drum-machine-header">
                                    <i class="fas fa-drum instrument-icon"></i>
                                    <span>Visco Space Drum</span>
                                    <i class="fas fa-chevron-right expand-icon"></i>
                                </div>
                                <div class="drum-machine-instruments">
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_bd" data-strudel="spacedrum_bd(11)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Bass Drum</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_sd" data-strudel="spacedrum_sd(3)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Snare</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_hh" data-strudel="spacedrum_hh(6)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_oh" data-strudel="spacedrum_oh(3)">
                                        <i class="fas fa-hat-cowboy instrument-icon"></i>
                                        <span>Open Hi-Hat</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_lt" data-strudel="spacedrum_lt(2)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Low Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_mt" data-strudel="spacedrum_mt(2)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>Mid Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_ht" data-strudel="spacedrum_ht(7)">
                                        <i class="fas fa-drum instrument-icon"></i>
                                        <span>High Tom</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_rd" data-strudel="spacedrum_rd(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Ride Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_cr" data-strudel="spacedrum_cr(1)">
                                        <i class="fas fa-gong instrument-icon"></i>
                                        <span>Crash Cymbal</span>
                                    </div>
                                    <div class="instrument-item" draggable="true" data-instrument="spacedrum_rim" data-strudel="spacedrum_rim(1)">
                                        <i class="fas fa-drum-steelpan instrument-icon"></i>
                                        <span>Rimshot</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                          
                        <!-- Synths Category -->
                        <div class="instrument-list category-content" data-category="synths">
                            <div class="instrument-item" draggable="true" data-instrument="brown" data-strudel="brown">
                                <i class="fas fa-wave-square instrument-icon"></i>
                                <span>Brown Noise</span>
                            </div>
                            <div class="instrument-item" draggable="true" data-instrument="bytebeat" data-strudel="bytebeat">
                                <i class="fas fa-wave-sine instrument-icon"></i>
                                <span>Bytebeat</span>
                            </div>
                            <div class="instrument-item" draggable="true" data-instrument="crackle" data-strudel="crackle">
                                <i class="fas fa-bolt instrument-icon"></i>
                                <span>Crackle</span>
                            </div>
                        </div>
                          
                        <!-- Tone.js Category (Original) -->
                        <div class="instrument-list category-content" data-category="tonejs">
                            <div class="instrument-item" draggable="true" data-instrument="sine">
                                <i class="fas fa-wave-square instrument-icon"></i>
                                <span>Sine Wave</span>
                            </div>
                            <div class="instrument-item" draggable="true" data-instrument="square">
                                <i class="fas fa-square instrument-icon"></i>
                                <span>Square Wave</span>
                            </div>
                            <div class="instrument-item" draggable="true" data-instrument="sawtooth">
                                <i class="fas fa-wave-sine instrument-icon"></i>
                                <span>Sawtooth Wave</span>
                            </div>
                            <div class="instrument-item" draggable="true" data-instrument="triangle">
                                <i class="fas fa-play instrument-icon"></i>
                                <span>Triangle Wave</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="center-stack">
            <div id="music-grid-container">
                <div class="grid-header">Music Grid</div>
                <div id="music-grid">
                    <div class="grid-quarter" data-quarter="1"></div>
                    <div class="grid-quarter" data-quarter="2"></div>
                    <div class="grid-quarter" data-quarter="3"></div>
                    <div class="grid-quarter" data-quarter="4"></div>
                </div>
                <div class="play-controls">
                    <button id="playBtn"><i class="fas fa-play"></i> Play</button>
                    <button id="stopBtn"><i class="fas fa-stop"></i> Stop</button>
                    <button id="deleteBtn"><i class="fas fa-trash"></i> Delete</button>
                    <button id="clearBtn"><i class="fas fa-trash"></i> Clear All</button>
                </div>
            </div>
        </div>

        <div id="side-panel">
            <div id="sound-properties">
                <div class="property-group">
                    <label for="instrumentType">Instrument Type</label>
                    <select id="instrumentType">
                        <option value="sine">Sine Wave</option>
                        <option value="square">Square Wave</option>
                        <option value="sawtooth">Sawtooth Wave</option>
                        <option value="triangle">Triangle Wave</option>
                        <option value="piano">Piano</option>
                        <option value="guitar">Guitar</option>
                        <!-- Strudel instruments -->
                        <option value="agogo">Agogo</option>
                        <option value="anvil">Anvil</option>
                        <option value="balafon">Balafon</option>
                        <option value="bongo">Bongo</option>
                        <option value="brakedrum">Brake Drum</option>
                        <option value="cabasa">Cabasa</option>
                        <option value="9000_bd">9000 Bass Drum</option>
                        <option value="9000_sd">9000 Snare</option>
                        <option value="9000_hh">9000 Hi-Hat</option>
                        <option value="ace_bd">Ace Bass Drum</option>
                        <option value="brown">Brown Noise</option>
                        <option value="bytebeat">Bytebeat</option>
                        <option value="crackle">Crackle</option>
                    </select>
                </div>
                  
                <!-- Strudel-specific settings (hidden by default) -->
                <div class="property-group strudel-settings">
                    <label for="strudelSample">Strudel Sample</label>
                    <input type="text" id="strudelSample" readonly>
                </div>
                  
                <div class="property-group">
                    <label for="duration">Duration (ms)</label>
                    <input type="range" id="duration" min="100" max="2000" value="500">
                    <span class="value" id="durationVal">500</span>
                </div>
                <div class="property-group">
                    <label for="volume">Volume</label>
                    <input type="range" id="volume" min="0" max="100" value="80">
                    <span class="value" id="volumeVal">80</span>
                </div>
                  
                <!-- Tone.js specific settings -->
                <div class="property-group tonejs-settings">
                    <label for="pitch">Pitch (Hz)</label>
                    <input type="range" id="pitch" min="220" max="880" value="440">
                    <span class="value" id="pitchVal">440</span>
                </div>
                  
                <div class="property-group tonejs-settings">
                    <label for="pan">Pan</label>
                    <input type="range" id="pan" min="-1" max="1" step="0.1" value="0">
                    <span class="value" id="panVal">0</span>
                </div>
                  
                <div class="property-group tonejs-settings">
                    <label for="attack">Attack (s)</label>
                    <input type="range" id="attack" min="0" max="1" step="0.01" value="0.1">
                    <span class="value" id="attackVal">0.1</span>
                </div>
                  
                <div class="property-group tonejs-settings">
                    <label for="decay">Decay (s)</label>
                    <input type="range" id="decay" min="0" max="2" step="0.01" value="0.5">
                    <span class="value" id="decayVal">0.5</span>
                </div>
                  
                <div class="property-group tonejs-settings">
                    <label for="waveform">Waveform</label>
                    <select id="waveform">
                        <option value="sine">Sine</option>
                        <option value="square">Square</option>
                        <option value="sawtooth">Sawtooth</option>
                        <option value="triangle">Triangle</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
</main>

<!-- Panel Toggle Button -->
<button id="panel-toggle">
    <i class="fas fa-cog"></i>
</button>

<!-- Settings Modal -->
<div class="modal-overlay" id="settings-modal">
    <div class="modal">
        <div class="modal-header">
            <h2><i class="fas fa-cog"></i> Settings</h2>
            <button class="modal-close" id="modal-close"><i class="fas fa-times"></i></button>
        </div>
        <div class="modal-content">
            <!-- Settings Tabs -->
            <div class="settings-tabs">
                <button class="settings-tab active" data-tab="general">
                    <i class="fas fa-cog"></i> General
                </button>
                <button class="settings-tab" data-tab="audio-effects">
                    <i class="fas fa-sliders-h"></i> Audio Effects
                </button>
            </div>
             
            <!-- General Settings Tab -->
            <div class="settings-tab-content active" data-tab-content="general">
                <div class="property-group">
                    <label for="gridSize">Grid Size</label>
                    <select id="gridSize">
                        <option value="2x2">2x2</option>
                        <option value="4x4">4x4</option>
                        <option value="8x8">8x8</option>
                    </select>
                </div>
                <div class="property-group">
                    <label for="bpm">BPM</label>
                    <input type="range" id="bpm" min="60" max="200" value="120">
                </div>
            </div>
             
            <!-- Audio Effects Tab -->
            <div class="settings-tab-content" data-tab-content="audio-effects">
                <div class="settings-content">
                    <!-- Core Amplitude & Envelope -->
                    <div class="settings-section">
                        <div class="section-heading">Core Amplitude & Envelope</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-volume-up"></i>
                                    <span>Gain (Volume)</span>
                                </label>
                                <input type="range" id="settings-gain" class="settings-range" min="0" max="2" step="0.01" value="1">
                                <div class="range-value" id="gain-value">1.0</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>Decay</span>
                                </label>
                                <input type="range" id="settings-decay" class="settings-range" min="0" max="2" step="0.01" value="0.4">
                                <div class="range-value" id="decay-value">0.4</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-wave-square"></i>
                                    <span>Sustain</span>
                                </label>
                                <input type="range" id="settings-sustain" class="settings-range" min="0" max="1" step="0.01" value="0.2">
                                <div class="range-value" id="sustain-value">0.2</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrow-up"></i>
                                    <span>Attack</span>
                                </label>
                                <input type="range" id="settings-attack" class="settings-range" min="0" max="1" step="0.01" value="0.01">
                                <div class="range-value" id="attack-value">0.01</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrow-down"></i>
                                    <span>Release</span>
                                </label>
                                <input type="range" id="settings-release" class="settings-range" min="0" max="2" step="0.01" value="0.2">
                                <div class="range-value" id="release-value">0.2</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrows-alt-h"></i>
                                    <span>Pan (Stereo)</span>
                                </label>
                                <input type="range" id="settings-pan" class="settings-range" min="-1" max="1" step="0.01" value="0">
                                <div class="range-value" id="pan-value">0</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Filters -->
                    <div class="settings-section">
                        <div class="section-heading">Filters</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-filter"></i>
                                    <span>Low-Pass Filter (Hz)</span>
                                </label>
                                <input type="range" id="settings-lpf" class="settings-range" min="20" max="20000" step="10" value="800">
                                <div class="range-value" id="lpf-value">800</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-filter"></i>
                                    <span>High-Pass Filter (Hz)</span>
                                </label>
                                <input type="range" id="settings-hpf" class="settings-range" min="20" max="20000" step="10" value="200">
                                <div class="range-value" id="hpf-value">200</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-filter"></i>
                                    <span>Band-Pass Filter (Hz)</span>
                                </label>
                                <input type="range" id="settings-bpf" class="settings-range" min="20" max="20000" step="10" value="1200">
                                <div class="range-value" id="bpf-value">1200</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-filter"></i>
                                    <span>Filter Resonance (Q)</span>
                                </label>
                                <input type="range" id="settings-lpq" class="settings-range" min="0" max="10" step="0.1" value="0.7">
                                <div class="range-value" id="lpq-value">0.7</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Time & Space Effects -->
                    <div class="settings-section">
                        <div class="section-heading">Time & Space Effects</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-clock"></i>
                                    <span>Delay Time (cycles)</span>
                                </label>
                                <input type="range" id="settings-delay" class="settings-range" min="0" max="1" step="0.01" value="0.25">
                                <div class="range-value" id="delay-value">0.25</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-redo"></i>
                                    <span>Delay Feedback</span>
                                </label>
                                <input type="range" id="settings-delayfb" class="settings-range" min="0" max="1" step="0.01" value="0.4">
                                <div class="range-value" id="delayfb-value">0.4</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-music"></i>
                                    <span>Delay Triplet Feel</span>
                                </label>
                                <input type="range" id="settings-delayt" class="settings-range" min="0" max="1" step="0.01" value="0.33">
                                <div class="range-value" id="delayt-value">0.33</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-mountain"></i>
                                    <span>Reverb Amount</span>
                                </label>
                                <input type="range" id="settings-reverb" class="settings-range" min="0" max="1" step="0.01" value="0.3">
                                <div class="range-value" id="reverb-value">0.3</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-cube"></i>
                                    <span>Room Size</span>
                                </label>
                                <input type="range" id="settings-room" class="settings-range" min="0" max="1" step="0.01" value="0.5">
                                <div class="range-value" id="room-value">0.5</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Distortion & Saturation -->
                    <div class="settings-section">
                        <div class="section-heading">Distortion & Saturation</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-fire"></i>
                                    <span>Distortion</span>
                                </label>
                                <input type="range" id="settings-distort" class="settings-range" min="0" max="1" step="0.01" value="0.3">
                                <div class="range-value" id="distort-value">0.3</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-compress"></i>
                                    <span>Bitcrush</span>
                                </label>
                                <input type="range" id="settings-crush" class="settings-range" min="1" max="16" step="1" value="4">
                                <div class="range-value" id="crush-value">4</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-wave-square"></i>
                                    <span>Waveshaper</span>
                                </label>
                                <input type="range" id="settings-shape" class="settings-range" min="0" max="1" step="0.01" value="0.5">
                                <div class="range-value" id="shape-value">0.5</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Pitch & Playback -->
                    <div class="settings-section">
                        <div class="section-heading">Pitch & Playback</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-tachometer-alt"></i>
                                    <span>Playback Speed</span>
                                </label>
                                <input type="range" id="settings-speed" class="settings-range" min="0.1" max="2" step="0.01" value="1">
                                <div class="range-value" id="speed-value">1.0</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-music"></i>
                                    <span>Pitch (semitones)</span>
                                </label>
                                <input type="range" id="settings-note" class="settings-range" min="-24" max="24" step="1" value="0">
                                <div class="range-value" id="note-value">0</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrows-alt-v"></i>
                                    <span>Octave Shift</span>
                                </label>
                                <input type="range" id="settings-coarse" class="settings-range" min="-2" max="2" step="1" value="0">
                                <div class="range-value" id="coarse-value">0</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Rhythmic & Glitch -->
                    <div class="settings-section">
                        <div class="section-heading">Rhythmic & Glitch</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-cut"></i>
                                    <span>Chop (slices)</span>
                                </label>
                                <input type="range" id="settings-chop" class="settings-range" min="1" max="16" step="1" value="8">
                                <div class="range-value" id="chop-value">8</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-redo"></i>
                                    <span>Stutter (repeats)</span>
                                </label>
                                <input type="range" id="settings-stutter" class="settings-range" min="1" max="8" step="1" value="2">
                                <div class="range-value" id="stutter-value">2</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-scissors"></i>
                                    <span>Truncate (tail cut)</span>
                                </label>
                                <input type="range" id="settings-trunc" class="settings-range" min="0" max="1" step="0.01" value="0.5">
                                <div class="range-value" id="trunc-value">0.5</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Modulation -->
                    <div class="settings-section">
                        <div class="section-heading">Modulation & Movement</div>
                        <div class="settings-group">
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-wave-sine"></i>
                                    <span>Vibrato (Hz)</span>
                                </label>
                                <input type="range" id="settings-vibrato" class="settings-range" min="1" max="20" step="1" value="4">
                                <div class="range-value" id="vibrato-value">4</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrows-alt-v"></i>
                                    <span>Vibrato Depth</span>
                                </label>
                                <input type="range" id="settings-vibdepth" class="settings-range" min="0" max="0.1" step="0.001" value="0.02">
                                <div class="range-value" id="vibdepth-value">0.02</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-wave-square"></i>
                                    <span>Tremolo (Hz)</span>
                                </label>
                                <input type="range" id="settings-tremolo" class="settings-range" min="1" max="20" step="1" value="8">
                                <div class="range-value" id="tremolo-value">8</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-arrows-alt-v"></i>
                                    <span>Tremolo Depth</span>
                                </label>
                                <input type="range" id="settings-tremdepth" class="settings-range" min="0" max="1" step="0.01" value="0.5">
                                <div class="range-value" id="tremdepth-value">0.5</div>
                            </div>
                        </div>
                    </div>
                     
                    <!-- Probability & Variation -->
                    <div class="settings-section">
                        <div class="section-heading">Probability & Variation</div>
                        <div class="settings-group">
                            <div class="property-group">
                                <label class="property-label">
                                    <i class="fas fa-dice"></i>
                                    <span>Random Effects</span>
                                </label>
                                <div class="setting-description">
                                    These controls allow you to apply effects probabilistically to create variation in your sounds.
                                </div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-percentage"></i>
                                    <span>Often Probability</span>
                                </label>
                                <input type="range" id="settings-often" class="settings-range" min="0" max="1" step="0.01" value="0.75">
                                <div class="range-value" id="often-value">75%</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-percentage"></i>
                                    <span>Sometimes Probability</span>
                                </label>
                                <input type="range" id="settings-sometimes" class="settings-range" min="0" max="1" step="0.01" value="0.5">
                                <div class="range-value" id="sometimes-value">50%</div>
                            </div>
                             
                            <div class="property-group has-slider">
                                <label class="property-label">
                                    <i class="fas fa-percentage"></i>
                                    <span>Rarely Probability</span>
                                </label>
                                <input type="range" id="settings-rarely" class="settings-range" min="0" max="1" step="0.01" value="0.25">
                                <div class="range-value" id="rarely-value">25%</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button class="modal-close">Cancel</button>
                <button class="primary" id="saveSettings">Save</button>
            </div>
        </div>
    </div>
</div>

    <!-- Tone.js Library - Using newer version that supports AudioWorkletNode -->
    <script src="https://cdn.jsdelivr.net/npm/tone@14.8.43/build/Tone.min.js"></script>
    <!-- Music Manager - Audio effects processing -->
    <script src="js/musicManager.js"></script>
    <!-- Strudel.cc Library - Load as regular script instead of module -->
    <script src="https://cdn.jsdelivr.net/npm/@strudel/webaudio@1.2.6/dist/strudel.min.js"></script>
    
    <!-- Tooltip System -->
    <script src="js/tooltip.js"></script>
    <!-- Audio Effects Manager -->
    <script src="js/audioEffectsManager.js"></script>
    <!-- Main Application Script -->
    <script src="js/app.js"></script>
</body>

</html>